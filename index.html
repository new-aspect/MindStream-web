<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindStream</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss-cdn@3.4.10/tailwindcss.js"></script>
    <!-- 引入Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body x-data="authCheck">

    <script>
        function authCheck() {
            return {
                init() {
                    // 页面加载时立即执行
                    this.checkAuth()
                },
                async checkAuth() {
                    try {
                        const response = await fetch('http://localhost:8080/api/user/me')
                        if (response.status === 401) {
                            // 如果返回401，跳转到sigin.html
                            window.location.href = 'sigin.html';
                        }
                    } catch(error) {
                        console.error("错误 检查权限时", error);
                    }   
                }
            }
        }
    </script>
</body>
</html>